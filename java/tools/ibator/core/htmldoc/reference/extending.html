<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Extending Ibator</title>
  <link type="text/css" rel="stylesheet" href="../ibator.css"/>
</head>
<body>

<div class="menuNav">
  <p>
    <a href="../index.html" target="_top">Show Menu</a>
    <a href="extending.html" target="_top">Hide Menu</a>
  </p>
</div>

<h1>Extending Ibator</h1>
<p>Ibator is designed for extensibility.  All code generation is performed using a
simple DOM representation of Java and XML elements that is included with ibator.</p>
<p>The Java DOM is included in the package <code>org.apache.ibatis.ibator.api.dom.java</code></p>
<p>The XML DOM is included in the package <code>org.apache.ibatis.ibator.api.dom.xml</code></p>
<p>These classes are not sufficient for every conceivable code generation possibility, but they are quite
useful for generating simple to moderately complex Java and XML code.</p>

<p>Using options in the ibator configuration file, you can provide your own implementations
of many of ibator's key interfaces.  You can also subclass any of the provided implementations
to provide customized behaviors.  This page will describe the public APIs available in
ibator and provide pointers to the source code for further investigation.  If you have
any difficulty understanding how to extend ibator, feel free to send a note to the
support mailing list at
<a href="mailto:user-java@ibatis.apache.org">user-java@ibatis.apache.org</a>.</p>

<h2>Extending Versus Plugging In</h2>
<p>Although it is possible to implement ibator's key interfaces as shown on this
page, in most cases it will be far easier to extend ibator through the use of a plugin.  See the
<a href="pluggingIn.html">Implementing Ibator Plugins</a> reference page for more information.</p>
<p>The DAO, Java Model, and SQL Map generator interfaces are interrelated and the code
behind the interfaces is quite complex.  In the years since the original release of Abator,
very few enhancement requests have appeared that could not be handled by a plugin.  If you
intend to supply your own implementation of these interfaces, you should plan to supply an
implementation for <i>all three</i> interfaces.  A good example of such an implementation
would be a FreeMarker or Velocity template based implementation of ibator.  In almost every
other instance, a plugin is the better way to go.</p>

<h2>org.apache.ibatis.ibator.generator.ibatis2.dao.templates.AbstractDAOTemplate</h2>
<p>TODO</p>

<h2>org.apache.ibatis.ibator.api.IntrospectedTable</h2>
<p>TODO</p>

<h2>org.apache.ibatis.ibator.api.IntrospectedColumn</h2>
<p>TODO</p>

<h2>org.apache.ibatis.ibator.api.JavaTypeResolver</h2>
<p>Ibator calls methods in this interface to map JDBC types to Java types
   during database introspection.  The default implementation of this
   interface is <code>org.apache.ibatis.ibator.internal.types.JavaTypeResolverDefaultImpl</code>.
   You can provide your own implementation, and the default implementation has
   been designed for extensibility.</p>

<p>To provide your own implementation, specify the fully qualified class name
   in the XML configuration like this:</p>
<pre>
    &lt;javaTypeResolver type="mypackage.MyImplementation"&gt;
      ...
    &lt;/javaTypeResolver&gt;
</pre>

<h2>org.apache.ibatis.ibator.api.ShellCallback</h2>
<p>Ibator calls methods in this interface to perform functions that it cannot
   do on its own.  The most important of these functions are:</p>
<ul>
  <li>Translating project/package into a directory structure</li>
   <li>Merging Java source files in the event that an existing Java file of
     the same name/package exists.</li>
</ul>

<p>The default implementation of this interface is
   <code>org.apache.ibatis.ibator.internal.DefaultShellCallback</code>.  The default
   implementation simply concatenates project and package together and creates
   the necessary package directories if needed.  The default implementation does not
   support merging of Java files, and will either overwrite or ignore files.</p>

<p>You can provide your own implementation.  This would be the most important
   class to write if you want to integrate ibator into some other environment.
   For example, the Eclipse plugin provides an implementation of this interface that
   supports Java file merging when running in the Eclipse environment.</p>

<p>To provide your own implementation, supply an instance of the interface
   on the constructor to the <code>org.apache.ibatis.ibator.api.Ibator</code>
   object.  This cannot be configured through XML.  If you are providing
   your own implementation of this interface then we assume that you are
   also providing some collateral code (like a new Ant task) to run
   your implementation.</p>

<h2>org.apache.ibatis.ibator.api.ProgressCallback</h2>
<p>Ibator calls methods in this interface to report progress during the
   generation of files (a long running process).  The default implementation
   of this interface is
   <code>org.apache.ibatis.ibator.internal.NullProgressCallback</code>
   which simply ignores all progress messages.  You can provide an
   implementation of this interface to support progress notifications and
   cancellation of file generation.</p>

<p>Implementing this interface would be important when integrating ibator
   into other IDE environments.  The Eclipse plugin provides an implementation
   of this interface that hooks into Eclipse's progress notification system.</p>

<p>To provide your own implementation, supply an instance of the interface
   in the <code>org.apache.ibatis.ibator.api.Ibator.generate()</code> method call.
   This cannot be configured through XML.  Again, we assume that if you are providing
   your own implementation of this interface then you are
   also providing some collateral code (like a new Ant task or an IDE integration) to run
   your implementation.</p>
</body>
</html>
