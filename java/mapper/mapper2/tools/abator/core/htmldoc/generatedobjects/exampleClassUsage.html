<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Example Class Usage Notes</title>
  <link type="text/css" rel="stylesheet" href="../abator.css"/>
</head>
<body>
<p align="right">
  <font size="-2">
    <a href="../index.html" target="_top">Frames</a>
    <a href="exampleClassUsage.html" target="_top">No Frames</a>
  </font>
</p>
<h1>Example Class Usage Notes</h1>
<p>Using the example class is different depending on the value of the
<code>generatorSet</code>
attribute of the <a href="../configreference/abatorContext.html">&lt;abatorContext&gt;</a>
configuration element.</p>
<p>If you are using the "Legacy" generator set, then see the usage notes
<a href="#legacy">here</a>.</p>
<p>If you are using the "Java2" or "Java5" generator set, then see the usage
notes <a href="#java2">here</a>.</p>

<p>The example class specifies how to build a dynamic where clause.  Each non-BLOB column in the
can optionally be included in the where clause.  Examples are the best way
to demonstrate the usage of this class.</p>

<a name="legacy"/>
<h2>Using the example Class with the Legacy Generator Set</h2>
<p>With this generator set the example class can be used to generate simple
where clauses.  This generator set is the default generator set, and classes
generated work with all versions of iBATIS.  However, the function of the example class
if somewhat limited.  If at all possible, we recommend using one of the other generator
sets - but those generator sets are dependant on iBATIS 2.2.0 or higher.</p>
<p>This example shows how to generate a simple where clause using the generated
example class:</p>
<pre>
  TestTableExample example = new TestTableExample();
  example.setField1("Fred");
  example.setField1_Indicator(TestTableExample.EXAMPLE_EQUALS);
  example.setField2(22);
  example.setField2_Indicator(TestTableExample.EXAMPLE_GREATER_THAN);
  example.setField3_Indicator(TestTableExample.EXAMPLE_NULL);

  List results = testTableDAO.selectByExample(example);
</pre>
<p>In the above example, the dynamically generated where clause will effectively be:</p>
<pre>
  where field1 = 'Fred' and field2 &gt; 22 and field3 is null
</pre>
<p>Returned records will meet these criteria.</p>
<p>Note that the default combination is <code>AND</code>.  If you want to use <code>OR</code>
instead, the you can call the method <code>setCombineTypeOr(true)</code> on the example class.</p>
<p>The available indicators are:</p>
<ul>
  <li>EXAMPLE_IGNORE - meaning don't include the related column in the where clause (this is the default)</li>
  <li>EXAMPLE_NULL - meaning the related column must be NULL</li>
  <li>EXAMPLE_NOT_NULL - meaning the related column must not be NULL</li>
  <li>EXAMPLE_EQUALS - meaning the related column must be equal to the related value in the example class</li>
  <li>EXAMPLE_NOT_EQUALS - meaning the related column must not be equal to the related value in the example class</li>
  <li>EXAMPLE_GREATER_THAN - meaning the related column must be greater than the related value in the example class</li>
  <li>EXAMPLE_GREATER_THAN_OR_EQUAL - meaning the related column must be greater than or equal to the related value in the example class</li>
  <li>EXAMPLE_LESS_THAN - meaning the related column must be less than the related value in the example class</li>
  <li>EXAMPLE_LESS_THAN_OR_EQUAL - meaning the related column must be less than or equal to the related value in the example class</li>
  <li>EXAMPLE_LIKE - meaning the related column must be "like" the related value in the example class.
    This value is ignored if the column is not a character column.
    Abator does not add the required '%', you must set that value yourself in the value you set in the
    example class.
  </li>
</ul>

<a name="java2"/>
<h2>Using the example Class with the Java2 or Java5 Generator Set</h2>
<p>With these generator sets the example class can be used to generate a virtually
unlimited where clauses.  These generator sets require that you are using iBATIS version
2.2.0 or higher.</p>
<p>The example classes created with these generator sets contain
an inner static class called <code>Criteria</code>
that holds a list of conditions that will be <b>anded</b> together in the where clause.  The
outer class holds a list of <code>Criteria</code> objects and all the clauses
from the inner classes will be <b>ored</b> together.  Using different sets of
<code>Criteria</code> classes allows you to generate virtually unlimited
types of where clauses.</p>
<p><code>Criteria</code> objects must be created with the <code>createCriteria</code> method
in the example class.  When the first <code>Criteria</code> object is created it is automatically
added to the list of <code>Criteria</code> objects - this makes it easy to write
a simple where clause if you don't need to or several other clauses together.</p>

<p>This example shows how to generate a simple WHERE clause using the generated
example class:</p>

<pre>
  TestTableExample example = new TestTableExample();

  example.createCriteria().andField1EqualTo(5);
</pre>

<p>In the above example, the dynamically generated where clause will effectively be:</p>
<pre>
  where field1 = 5
</pre>

<p>The next example shows how to generate a complex WHERE clause using the generated
example class (using JSE 5.0 parameterized types):</p>
<pre>
  TestTableExample example = new TestTableExample();

  example.createCriteria()
    .andField1EqualTo(5)
    .andField2IsNull();

  example.or(example.createCriteria()
    .andField3NotEqualTo(9)
    .andField4IsNotNull());

  List&lt;Integer&gt; field5Values = new ArrayList&lt;Integer&gt;();
  field5Values.add(8);
  field5Values.add(11);
  field5Values.add(14);
  field5Values.add(22);

  example.or(example.createCriteria()
    .andField5In(field5Values));

  example.or(example.createCriteria()
    .andField6Between(3, 7));

</pre>
<p>In the above example, the dynamically generated where clause will effectively be:</p>
<pre>
  where (field1 = 5 and field2 is null)
     or (field3 &lt;&gt; 9 and field4 is not null)
     or (field5 in (8, 11, 14, 22))
     or (field6 between 3 and 7)
</pre>
<p>Returned records will meet these criteria.</p>
<p>The <code>Criteria</code> inner class includes <code>andXXX</code> methods for each field,
and each possible SQL predicate including:</p>
<ul>
  <li>IS NULL - meaning the related column must be NULL</li>
  <li>IS NOT NULL - meaning the related column must not be NULL</li>
  <li>= (equal) - meaning the related column must be equal to the value passed in on the method call</li>
  <li>&lt;&gt; (not equal) - meaning the related column must not be equal to the value passed in on the method call</li>
  <li>&gt; (greater than) - meaning the related column must be greater than the value passed in on the method call</li>
  <li>&gt;= (greater than or equal) - meaning the related column must be greater than or equal to the value passed in on the method call</li>
  <li>&lt; (less than) - meaning the related column must be less than the value passed in on the method call</li>
  <li>&lt;= (less than or equal) - meaning the related column must be less than or equal to the value passed in on the method call</li>
  <li>LIKE - meaning the related column must be "like" the value passed in on the method call.
    Abator does not add the required '%', you must set that value yourself in the value you pass
    in on the method call.
  </li>
  <li>NOT LIKE - meaning the related column must be "not like" the value passed in on the method call.
    Abator does not add the required '%', you must set that value yourself in the value you pass
    in on the method call.
  </li>
  <li>BETWEEN - meaning the related column must be "between" the two values passed in on
      the method call.</li>
  <li>NOT BETWEEN - meaning the related column must be "not between" the two values passed in on
      the method call.</li>
  <li>IN - meaning the related column must be one of the list of values passed in on
      the method call.</li>
  <li>NOT IN - meaning the related column must not be one of the list of values passed in on
      the method call.</li>
</ul>


</body>
</html>
