<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <title>Abator XML Configuration File Reference</title>
</head>
<body>
<h1>XML Configuration File Reference</h1>
<p>In the normal use case, Abator is driven by an XML configuration file.
  The configuration file tells Abator:</p>
  
<ul>
  <li>How to connect to the database</li>
  <li>What objects to generate, and how to generate them</li>
  <li>What tables should be used for object generation</li>
</ul>

<p>At this point, the best reference for the XML configuration file is the annotated DTD.  The following
is an example abator configuration file:</p>
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE abatorConfiguration
  PUBLIC "-//Apache Software Foundation//DTD Abator for iBATIS Configuration 1.0//EN"
  "http://ibatis.apache.org/dtd/abator-config_1_0.dtd"&gt;

&lt;abatorConfiguration&gt;
  &lt;abatorContext id="DB2Tables"&gt;
    &lt;jdbcConnection driverClass="COM.ibm.db2.jdbc.app.DB2Driver"
        connectionURL="jdbc:db2:JGBTEST"
        userId="db2admin"
        password="db2admin"&gt;
      &lt;classPathEntry location="/Program Files/IBM/SQLLIB/java/db2java.zip" /&gt;
    &lt;/jdbcConnection&gt;
  
    &lt;javaTypeResolver &gt;
      &lt;property name="forceBigDecimals" value="false" /&gt;  &lt;!-- default is false --&gt;
    &lt;/javaTypeResolver&gt;
  
    &lt;javaModelGenerator targetPackage="test.model" targetProject="Abator Test Project"&gt;
      &lt;property name="enableSubPackages" value="true" /&gt; &lt;!-- default is false --&gt;
      &lt;property name="trimStrings" value="true" /&gt; &lt;!-- default is false --&gt;
    &lt;/javaModelGenerator&gt;
  
    &lt;sqlMapGenerator targetPackage="test.xml"  targetProject="Abator Test Project"&gt;
      &lt;property name="enableSubPackages" value="true" /&gt; &lt;!-- default is false --&gt;
    &lt;/sqlMapGenerator&gt;
  
    &lt;daoGenerator type="IBATIS" targetPackage="test.dao"  targetProject="Abator Test Project"&gt;
      &lt;property name="enableSubPackages" value="true" /&gt; &lt;!-- default is false --&gt;
    &lt;/daoGenerator&gt;
  
    &lt;table schema="DB2ADMIN" tableName="ALLTYPES" domainObjectName="Customer" &gt;
      &lt;property name="useActualColumnNames" value="true"/&gt; &lt;!-- default is false --&gt;
      &lt;generatedKey column="ID" sqlStatement="DB2" identity="true" /&gt;
      &lt;columnOverride column="DATE_FIELD" property="startDate" /&gt;
      &lt;ignoreColumn column="FRED" /&gt;
      &lt;columnOverride column="LONG_VARCHAR_FIELD" jdbcType="VARCHAR" /&gt;
    &lt;/table&gt;
  
  &lt;/abatorContext&gt;
&lt;/abatorConfiguration&gt;

</pre>
<p>Important notes about this file follow:</p>
<ul>
  <li>The file specifies that the legacy DB2 CLI driver will be used to connect to the database,
      and also specifies where the driver can be found.</li>
  <li>The Java Type Resolver should not force the use of Bigdecimal fields - this means that
      integral types (Short, Integer, Long, etc.) will be substituted if possible.  This feature
      is an attempt to make database DECIMAL and NUMERIC columns easier to deal with.</li>
  <li>The Java model generator should use sub-packages.  This means that the generated model 
      objects will be placed in a package called "test.model.db2admin" in this case (because the table
      is in the "DB2ADMIN" schema).  If the "enableSubPackages" attribute was set to "false",
      then the package would be "test.model".  The Java model generator should also trim strings.
      This means that the setters for any String property will call the "trim" function -
      this is useful if your database will return blank characters at the end of character
      columns.</li>
  <li>The SQL Map generator should use sub-packages.  This means that the generated XML files
      will be placed in a package called "test.xml.db2admin" in this case (because the table
      is in the "DB2ADMIN" schema).  If the "enableSubPackages" attribute was set to "false",
      then the package would be "test.xml".</li>
  <li>The DAO generator should use sub-packages.  This means that the generated DAO classes
      will be placed in a package called "test.dao.db2admin" in this case (because the table
      is in the "DB2ADMIN" schema).  If the "enableSubPackages" attribute was set to "false",
      then the package would be "test.dao".  The DAO generator should generate DAO classes
      that conform to the iBATIS DAO framework.  The DAO generator can generate
      DAO classes in the following formats:
    <ul>
      <li>IBATIS - for the iBATIS DAO Framework</li>
      <li>SPRING - for the Spring Framework</li>
      <li>GENRIC-CI - for DAOs that only depend on iBATIS' SQL Map API.  The SQL map is
          supplied through constructor injection</li>
      <li>GENRIC-SI - for DAOs that only depend on iBATIS' SQL Map API.  The SQL map is
          supplied through setter injection</li>
    </ul>
  </li>
  <li>The file specifies only one table will be introspected, but many more could be specified.
      Important note about that table are as follows:
    <ul>
      <li>The generated objects will be based on the name "Customer" (CustomerKey, Customer, 
          CustomerDAO, etc.) - rather than on the table name.</li>
      <li>Actual column names will be used as properties.  If this property were set to 
          "false" (or not specified), then Abator would attempt to camel case the column
          names.  In either case, the name can be overridden by the &lt;columnOverride&gt;
          element</li>
      <li>The column has a generated key, it is an identity column, and the database type is DB2.
          This will cause
          Abator to generate the proper &lt;selectKey&gt; element in the generated &lt;insert&gt;
          statement so that the newly generated key can be returned.  Valid values for the 
          <code>sqlStatement</code> attribute include DB2, MYSQL, and SQLSERVER (only if the column
          is an identity column).  Or
          you can specify the proper statement for other databases.</li>
      <li>The column "DATE_FIELD" will be mapped to a property called "startDate".  This will
          override the default property which would be "DATE_FIELD" in this case, or "dateField"
          if the "useActualColumnNames" property was set to "false".</li>
      <li>The column "FRED" will be ignored.  No SQL will list the field, and no Java property will
          be generated.</li>
      <li>The column "LONG_VARCHAR_FIELD" will be treated as a VARCHAR field, regardless of the 
          actual datatype.</li>
    </ul>
  </li>
</ul>
</body>
</html>
