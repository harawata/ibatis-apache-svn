<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Extending Abator</title>
  <link type="text/css" rel="stylesheet" href="../abator.css"/>
</head>
<body>
<p align="right">
  <font size="-2">
    <a href="../index.html" target="_top">Frames</a>
    <a href="extending.html" target="_top">No Frames</a>
  </font>
</p>
<h1>Extending Abator</h1>
<p>Abator is designed for extensibility.  All code generation is performed using a
simple DOM representation of Java and XML elements that is included with Abator.</p>
<p>The Java DOM is included in the package <code>org.apache.ibatis.abator.api.dom.java</code></p>
<p>The XML DOM is included in the package <code>org.apache.ibatis.abator.api.dom.xml</code></p>
<p>These classes are not sufficient for every conceivable code generation possibility, but they are quite
useful for generating simple to moderately complex Java and XML code.</p>

<p>Using options in the Abator configuration file, you can provide your own implementations
of any of Abator's key interfaces.  You can also subclass any of the provided implementations
to provide customized behaviors.  This page will describe the public APIs available in
Abator and provide pointers to the source code for further investigation.  If you have
any difficulty understanding how to extend Abator, feel free to send a note to the
support mailing list at
<a href="mailto:user-java@ibatis.apache.org">user-java@ibatis.apache.org</a>.</p>

<h2>org.apache.ibatis.abator.api.JavaModelGenerator</h2>
<p>Abator calls methods in this interface to generate the Java model POJOs.
   You can provide your own implementation, and the default implementations have
   been designed for extensibility.  The default implementation of the interface
   is dependant on the value of the <code>generatorSet</code>
   property of the <a href="../configreference/abatorContext.html">&lt;abatorContext&gt;</a>
   configuration element.  The following table shows the different possibilities:</p>

<table border="1" cellspacing="0" cellpadding="5">
  <tr>
    <th>generatorSet</th>
    <th>Implementation Class</th>
  </tr>
  <tr>
    <td>Legacy</td>
    <td><code>org.apache.ibatis.abator.internal.java.model.JavaModelGeneratorLegacyImpl</code></td>
  </tr>
  <tr>
    <td>Java2 (the default value)</td>
    <td><code>org.apache.ibatis.abator.internal.java.model.JavaModelGeneratorJava2Impl</code></td>
  </tr>
  <tr>
    <td>Java5</td>
    <td><code>org.apache.ibatis.abator.internal.java.model.JavaModelGeneratorJava5Impl</code></td>
  </tr>
</table>

<p>To provide your own implementation, specify the fully qualified class name
   in the XML configuration like this:</p>
<pre>
    &lt;javaModelGenerator type="mypackage.MyImplementation"&gt;
      ...
    &lt;/javaModelGenerator&gt;
</pre>

<h2>org.apache.ibatis.abator.api.SqlMapGenerator</h2>
<p>Abator calls methods in this interface to generate the SQL Maps.
   You can provide your own implementation, and the default implementations have
   been designed for extensibility.  The default implementation of the interface
   is dependant on the value of the <code>generatorSet</code>
   property of the <a href="../configreference/abatorContext.html">&lt;abatorContext&gt;</a>
   configuration element.  The following table shows the different possibilities:</p>

<table border="1" cellspacing="0" cellpadding="5">
  <tr>
    <th>generatorSet</th>
    <th>Implementation Class</th>
  </tr>
  <tr>
    <td>Legacy (the default value)</td>
    <td><code>org.apache.ibatis.abator.internal.sqlmap.SqlMapGeneratorLegacyImpl</code></td>
  </tr>
  <tr>
    <td>Java2 or Java5</td>
    <td><code>org.apache.ibatis.abator.internal.sqlmap.SqlMapGeneratorIterateImpl</code></td>
  </tr>
</table>

<p>To provide your own implementation, specify the fully qualified class name
   in the XML configuration like this:</p>
<pre>
    &lt;sqlMapGenerator type="mypackage.MyImplementation"&gt;
      ...
    &lt;/sqlMapGenerator&gt;
</pre>

<h2>org.apache.ibatis.abator.api.DAOGenerator</h2>
<p>Abator calls methods in this interface to generate the DAOs for each introspected
table.  Abator supplies twelve implementations of this
interface to match the four different types of DAOs, and the three different sets
of code generators.  The implementation is selected based on the value of the
<a href="../configreference/abatorContext.html">&lt;abatorContext&gt;</a>
configuration element and the value of the <code>type</code> attribute
of the <a href="../configreference/daoGenerator.html">&lt;daoGenerator&gt;</a> element.
The implementations are:</p>

<table border="1" cellspacing="0" cellpadding="5">
  <tr>
    <th>generatorSet/type</th>
    <th>Implementation Class</th>
  </tr>
  <tr>
    <td nowrap="nowrap">Legacy/IBATIS</td>
    <td><code>org.apache.ibatis.abator.internal.java.dao.IbatisLegacyDAOGenerator</code></td>
  </tr>
  <tr>
    <td>Legacy/GENERIC-CI</td>
    <td><code>org.apache.ibatis.abator.internal.java.dao.GenericCILegacyDAOGenerator</code></td>
  </tr>
  <tr>
    <td nowrap="nowrap">Legacy/GENERIC-SI</td>
    <td><code>org.apache.ibatis.abator.internal.java.dao.GenericSILegacyDAOGenerator</code></td>
  </tr>
  <tr>
    <td nowrap="nowrap">Legacy/SPRING</td>
    <td><code>org.apache.ibatis.abator.internal.java.dao.SpringLegacyDAOGenerator</code></td>
  </tr>
  <tr>
    <td nowrap="nowrap">Java2/IBATIS</td>
    <td><code>org.apache.ibatis.abator.internal.java.dao.IbatisJava2DAOGenerator</code></td>
  </tr>
  <tr>
    <td nowrap="nowrap">Java2/GENERIC-CI</td>
    <td><code>org.apache.ibatis.abator.internal.java.dao.GenericCIJava2DAOGenerator</code></td>
  </tr>
  <tr>
    <td nowrap="nowrap">Java2/GENERIC-SI</td>
    <td><code>org.apache.ibatis.abator.internal.java.dao.GenericSIJava2DAOGenerator</code></td>
  </tr>
  <tr>
    <td nowrap="nowrap">Java2/SPRING</td>
    <td><code>org.apache.ibatis.abator.internal.java.dao.SpringJava2DAOGenerator</code></td>
  </tr>
  <tr>
    <td nowrap="nowrap">Java5/IBATIS</td>
    <td><code>org.apache.ibatis.abator.internal.java.dao.IbatisJava5DAOGenerator</code></td>
  </tr>
  <tr>
    <td nowrap="nowrap">Java5/GENERIC-CI</td>
    <td><code>org.apache.ibatis.abator.internal.java.dao.GenericCIJava5DAOGenerator</code></td>
  </tr>
  <tr>
    <td nowrap="nowrap">Java5/GENERIC-SI</td>
    <td><code>org.apache.ibatis.abator.internal.java.dao.GenericSIJava5DAOGenerator</code></td>
  </tr>
  <tr>
    <td nowrap="nowrap">Java5/SPRING</td>
    <td><code>org.apache.ibatis.abator.internal.java.dao.SpringJava5DAOGenerator</code></td>
  </tr>
</table>

<p>The different DAO implementations are "configured" through the use of
   a template described in
   <code>org.apache.ibatis.abator.internal.java.dao.AbstractDAOTemplate</code>.
   It should be fairly simple to provide a new template for a different type
   of DAO if needed.</p>
<p>The DAO generators are also designed for extensibility.  To provide your own
   implementation, specify the fully qualified class name in the XML
   configuration like this:</p>
<pre>
    &lt;daoGenerator type="mypackage.MyImplementation"&gt;
      ...
    &lt;/daoGenerator&gt;
</pre>

<h2>org.apache.ibatis.abator.api.JavaTypeResolver</h2>
<p>Abator calls methods in this interface to map JDBC types to Java types
   during database introspection.  The default implementation of this
   interface is <code>org.apache.ibatis.abator.internal.types.JavaTypeResolverDefaultImpl</code>.
   You can provide your own implementation, and the default implementation has
   been designed for extensibility.</p>

<p>To provide your own implementation, specify the fully qualified class name
   in the XML configuration like this:</p>
<pre>
    &lt;javaTypeResolver type="mypackage.MyImplementation"&gt;
      ...
    &lt;/javaTypeResolver&gt;
</pre>

<h2>org.apache.ibatis.abator.api.ShellCallback</h2>
<p> Abator calls methods in this interface to perform functions that it cannot
   do on its own.  The most important of these functions are:</p>
<ul>
  <li>Translating project/package into a directory structure</li>
   <li>Merging Java source files in the event that an existing Java file of
     the same name/package exists.</li>
</ul>

<p>The default implementation of this interface is
   <code>org.apache.ibatis.abator.internal.DefaultShellCallback</code>.  The default
   implementation simply concatenates project and package together and creates
   the necessary package directories if needed.  The default implementation does not
   support merging of Java files, and will either overwrite or ignore files.</p>

<p>You can provide your own implementation.  This would be the most important
   class to write if you want to integrate Abator into some other environment.
   The Eclipse plugin provides an implementation of this interface that
   supports Java file merging when running in the Eclipse environment.</p>

<p>To provide your own implementation, supply an instance of the interface
   on the constructor to the <code>org.apache.ibatis.abator.api.Abator</code>
   object.  This cannot be configured through XML.  If you are providing
   your own implementation of this interface then we assume that you are
   also providing some collateral code (like a new Ant task) to run
   your implementation.</p>

<h2>org.apache.ibatis.abator.api.ProgressCallback</h2>
<p>Abator calls methods in this interface to report progress during the
   generation of files (a long running process).  The default implementation
   of this interface is
   <code>org.apache.ibatis.abator.internal.NullProgressCallback</code>
   which simply ignores all progress messages.  You can provide an
   implementation of this interface to support progress notifications and
   cancellation of file generation.</p>

<p>Implementing this interface would be important when integrating Abator
   into other IDE environments.  The Eclipse plugin provides an implementation
   of this interface that hooks into Eclipse's progress notification system.</p>

<p>To provide your own implementation, supply an instance of the interface
   in the <code>org.apache.ibatis.abator.api.Abator.generate()</code> method call.
   This cannot be configured through XML.  Again, we assume that if you are providing
   your own implementation of this interface then you are
   also providing some collateral code (like a new Ant task or an IDE integration) to run
   your implementation.</p>
</body>
</html>
